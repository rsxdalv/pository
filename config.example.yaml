# Pository Configuration File
# Place at /etc/pository/config.yaml or specify via POSITORY_CONFIG env var

# Data storage root directory
dataRoot: /var/lib/pository

# Log file directory
logPath: /var/log/pository

# Server settings
port: 3000
bindAddress: 0.0.0.0

# TLS configuration (optional)
tls:
  enabled: false
  # cert: /etc/pository/server.crt
  # key: /etc/pository/server.key

# Upload size limit (in bytes)
maxUploadSize: 104857600  # 100MB

# Allowed repository names (empty means all allowed)
allowedRepos:
  - default
  - releases
  - snapshots

# Path to API keys storage
apiKeysPath: /etc/pository/api-keys.json

# Bootstrap admin key (can also be set via POSITORY_ADMIN_KEY env var)
# WARNING: Change this in production!
# adminKey: your-secret-admin-key

# CORS allowed origins for the web dashboard
# Comma-separated list; if empty, only localhost / 127.0.0.1 origins are allowed.
# Set to the public URL of your pository-frontend instance in production.
# Can also be set via POSITORY_CORS_ORIGINS env var (comma-separated).
# corsOrigins:
#   - https://pository.example.com

# Retention policy (optional)
retention:
  enabled: false
  # keepLastN: 5
  # maxAgeDays: 90

# GitHub OIDC authentication (optional — zero config for the common case)
#
# Allows GitHub Actions workflows to upload packages without a static API key.
# The workflow must have `id-token: write` permission.
#
# Default rule: any private repository under oidcAllowedOwners can upload a
# package whose name matches the GitHub repository name (convention over config).
# Example: repo "rsxdalv/my-service" → can upload package "my-service".
#
# Override examples:
#   oidcOverrides:
#     rsxdalv/mono-repo:      # one repo, multiple package names
#       - service-a
#       - service-b
#     rsxdalv/deployment-bot: # wildcard — can upload anything
#       - '*'
#
# oidcAudience: pository                  # must match the action's oidc-audience input
# oidcAllowedOwners:                      # GitHub owners allowed by the default rule
#   - rsxdalv
# oidcRequirePrivate: true                # set to false to allow public repos via default rule
# oidcOverrides: {}                       # per-repo package allowlists
